#summary Protocol Buffers interface

= Introduction =

As the BIMserver's main function is to allow other software to store and retrieve information about building information models, it is very important to support a wide variety of programming language. From the beginning of the BIMserver project a SOAP interface has been available, but SOAP has a few disadvantages being:
  * SOAP is XML based, which makes it slower/larger
  * Almost every SOAP stack interprets the standards a little different
  * A lot of diversions/extensions are available, making it almost not a standard

For these reasons another interface has been implemented: [http://code.google.com/p/protobuf/ Protocol Buffers].

The Protocol Buffers API has been created on top of the "Service Interface", so the actual calls will not be described in this document.

= Proto file =

The .proto file can be downloaded from a running BIMserver. Go to the "Info" page and click on the "Web Services" tab, then download the "Protocol Buffers Descriptor File". With this .proto file you can generate the service interface and messages for a wide range of programming languages, please check out the Protocol Buffers website for more details.

= BIMserver Specific =

The "Service Interface" methods are not available in the Protocol Buffers API as-is because PB does have some limitations.

All service calls in Protocol Buffers allow only 1 parameter and 1 return type, for this reason the BIMserver generates specific "Request" and "Response" messages for every call. For example the "login" method uses the "LoginRequest" message as input parameter, and the "LoginResponse" message as the return type.

= Request Messages =

All request messages contain the same amount of fields as there are parameters in the service call. So for the login method, the "LoginRequest" message contains 2 fields: "username" and "password", both of type "string".

= Response Messages =
All response messages contain 2 fields. The first field is the "errorMessage" field of type "string". This field always contains "OKE" if the call succeeded, are something else describing the error if the call did not succeed. The reason for this construction is the fact that Protocol Buffers does not support Exceptions, but the "Service Interface" does throw them. The BIMserver converts the exceptions thrown to errorMessage values.

The second field is the actual return value. This is always the same value as in the ServiceInterface, or unset if an error occured. The special "Void" type is used for return-type-less methods.