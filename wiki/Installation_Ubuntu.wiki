#summary How to install the BIMserver on a freshly installed Ubuntu Server

= Introduction =

This guide is used to install a BIMserver on a cloud based server. Root rights are assumed, when running as a normal user, prepend "sudo " to each command.

Paths can be changed to your liking of course.

= Commands =

|| *Command* || *Description* ||
||passwd||Change your password||
||apt-get update||Update the package index||
||apt-get upgrade||Upgrade installed packages||
||apt-get install default-jre-headless tomcat6||Install JRE 6 and Tomcat 6||
||ntpdate ntp2.xs4all.nl||Update the local time||
||dpkg-reconfigure tzdata||Select timezone||
||nano /etc/tomcat6/server.xml||Change the port attribute in the Connector tag to the desired port (please see: "Running op ports below 1024" ||
||nano /var/lib/tomcat6/conf/policy.d/04webapps.policy||Change to:{{{grant {    permission java.security.AllPermission;};}}}||
||rm -R /var/lib/tomcat6/webapps/ROOT||Remove the default ROOT application||
||cp -r /usr/share/tomcat6-admin/manager /usr/share/tomcat6/webapps||Install the Tomcat manager application||
||wget http://tools.bimtoolset.org/BIMserver/1.0stable/bimserver-1.0.war -O /usr/share/tomcat6/webapps/ROOT.war||Download the latest version of the BIMserver, and install as ROOT application||
||mkdir /var/databases||Create a database directory||
||chown -R tomcat6 /var/databases||Give the tomcat user access to the database directory||
||chown -R tomcat6 /usr/share/tomcat6/webapps||Give Tomcat rights on the webapps directory (this should have already been done||

Eidt /etc/default/tomcat6 (with "nano" for example), change the line with "JAVA_OPTS" to: JAVA_OPTS="-Djava.awt.headless=true -Xmx12G -Xss4096k"

||/etc/init.d/tomcat6 restart||||

= Using the Tomcat Manager =

(Copied from: [https://help.ubuntu.com/10.10/serverguide/C/tomcat.html])
== Tomcat administration webapps ==

The tomcat6-admin package contains two webapps that can be used to administer the Tomcat server using a web interface. You can install them by entering the following command in the terminal prompt:

sudo apt-get install tomcat6-admin
The first one is the manager webapp, which you can access by default at http://yourserver:8080/manager/html. It is primarily used to get server status and restart webapps.

Access to the manager application is protected by default: you need to define a user with the role "manager" in /etc/tomcat6/tomcat-users.xml before you can access it.

= Running op ports below 1024 =

The tomcat user has no rights to bind to ports below 1024, to make the server available on port 80 (the default HTTP port), you can use iptables (you might have to install the package "iptables"):

iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8080
iptables -t nat -A OUTPUT -p tcp --dport 80 -j REDIRECT --to-ports 8080